{"name":"Pull-To-Refresh","tagline":"\"Pull to Refresh\" and \"Infinity List\" implementation for Feathers","body":"pull-to-refresh\r\n===============\r\n\r\n\"Pull to Refresh\" and \"Infinity List\" implementation for Feathers\r\n\r\n## Features\r\n* Pull to Refresh for latest items\r\n* Infinity Scroll for earlier items\r\n* Visual indicators for _loading_, _error_ and _empty_ states\r\n* Responsibility of loading items could be delegated to Data Provider\r\n* Have no restriction for Header's and Footer's animation\r\n\r\n## Usage\r\nPullToRefresh extends standard Feathers' List, it can be created as usual list:\r\n```as3\r\nthis.pullToRefresh = new PullToRefresh();\r\nthis.pullToRefresh.loadImmediately = true; // indicates that loading of initial items will be started on list created\r\nthis.pullToRefresh.dataProvider = new ListCollection();\r\nthis.addChild(this.pullToRefresh);\r\n```\r\n\r\nThen define three methods for loading **initial**, **earlier** and **latest** items:\r\n```as3\r\n\r\nthis.pullToRefresh.loadFunction = function(resultHandler:Function, errorHandler:Function):void\r\n{\r\n  var result:Function = function(value:Object):*\r\n  {\r\n    resultHandler(value.data, value.hasMoreRecords);\r\n  }\r\n\r\n  Promise.delay({data : [{label : \"M\"}, {label : \"N\"}, {label : \"O\"}], hasMoreRecords : true}, 1000).then(result).otherwise(errorHandler);\r\n};\r\n\r\nthis.pullToRefresh.proceedFunction = function(resultHandler:Function, errorHandler:Function):void\r\n{\r\n  var result:Function = function(value:Object):*\r\n  {\r\n    resultHandler(value.data, value.hasMoreRecords);\r\n  }\r\n\r\n  Promise.delay({data : [{label : \"X\"}, {label : \"Y\"}, {label : \"Z\"}], hasMoreRecords : true}, 1000).then(result).otherwise(errorHandler);\r\n};\r\n\r\nthis.pullToRefresh.refreshFunction = function(resultHandler:Function, errorHandler:Function):void\r\n{\r\n  var result:Function = function(value:Object):*\r\n  {\r\n    resultHandler(value.data);\r\n  }\r\n\r\n  Promise.delay({data : [{label : \"A\"}, {label : \"B\"}, {label : \"C\"}]}, 1000).then(result).otherwise(errorHandler);\r\n};\r\n\r\n```\r\n\r\nIn this example we uses [as3-promises] to simulate server response. Also take a look on `hasMoreRecords` param, this is flag that indicates if there are more earlier data to load, and note that it is used only for `load` and `proceed` function, but not for `refresh`.\r\n\r\n### Customizing Appearance\r\n\r\n\r\nThe next visual components could be specified: \r\n* _Header_ that **should** implements [Header](src/feathersx/controls/pulltorefresh/Header.as) interface,\r\n* _Footer_ that **should** implements [Footer](src/feathersx/controls/pulltorefresh/Footer.as)  interface,\r\n* _ErrorIndicator_ (indicates error state) that **could** implements [ErrorIndicator](src/feathersx/controls/pulltorefresh/ErrorIndicator.as) interface,\r\n* _EmptyIndicator_ (indicates empty state) that **could** implements [EmptyIndicator](src/feathersx/controls/pulltorefresh/EmptyIndicator.as) interface and\r\n* _LoadingIndicator_ (indicates loading state) that have not special interface.\r\n\r\n**Note**: The reason to implement correspond interfaces for error and empty indicators is they can receive error and empty strings. Each indicator is placed at the center of the PullToRefresh list.\r\n\r\nEach of these components have default implementation, that could be overridden through factory method: \r\n```as3\r\nthis.pullToRefresh.headerFactory = function():DisplayObject\r\n{\r\n  return new CustomHeader();\r\n};\r\n\r\nthis.pullToRefresh.footerFactory = function():DisplayObject\r\n{\r\n  return new CustomFooter();\r\n};\r\n\r\nthis.pullToRefresh.emptyIndicatorFactory = function():DisplayObject\r\n{\r\n  return new DisplayObject();\r\n};\r\n\r\nthis.pullToRefresh.errorIndicatorFactory = function():DisplayObject\r\n{\r\n  return new DisplayObject();\r\n};\r\n\r\nthis.pullToRefresh.loadingIndicatorFactory = function():DisplayObject\r\n{\r\n  return new DisplayObject();\r\n};\r\n```\r\n\r\n### Customizing Data Insert\r\nThe default implementations of insert, append and prepend items could be overridden:\r\n```as3\r\nthis.pullToRefresh.insertDataFunction = function(items:Array):void\r\n{\r\n  this.pullToRefresh.data = items;\r\n};\r\n\r\nthis.pullToRefresh.appendDataFunction = function(items:Array):void\r\n{\r\n  this.pullToRefresh.addAllAt(new ListCollection(items), 0);\r\n};\r\n\r\nthis.pullToRefresh.prependDataFunction = function(items:Array):void\r\n{\r\n  this.pullToRefresh.addAll(new ListCollection(items));\r\n};\r\n```\r\n\r\n## Using Provider\r\nThe responsibility of work with server could be delegated to data provider. Just pass data provider that implements [Provider](src/feathersx/controls/pulltorefresh/ErrorIndicator.as):\r\n\r\n```as3\r\npublic class TodoProvider extends ListCollection implements Provider\r\n{\r\n  public function TodoProvider()\r\n  {\r\n   super();\r\n  }\r\n\r\n  public function get insertDataFunction():Function {return null;}\r\n  \r\n  public function get appendDataFunction():Function {return null;}\r\n  \r\n  public function get prependDataFunction():Function {return null;}\r\n  \r\n  public function load(result:Function, error:Function):void\r\n  {\r\n    var result:Function = function(value:Object):*\r\n    {\r\n      resultHandler(value.data, value.hasMoreRecords);\r\n    }\r\n    \r\n    Promise.delay({data : [{label : \"M\"}, {label : \"N\"}, {label : \"O\"}], hasMoreRecords : true}, 1000).then(result).otherwise(errorHandler);\r\n  }\r\n  \r\n  public function refresh(result:Function, error:Function):void\r\n  {\r\n    var result:Function = function(value:Object):*\r\n    {\r\n      resultHandler(value.data);\r\n    }\r\n    \r\n    Promise.delay({data : [{label : \"A\"}, {label : \"B\"}, {label : \"C\"}]}, 1000).then(result).otherwise(errorHandler);\r\n  }\r\n  \r\n  public function proceed(result:Function, error:Function):void\r\n  {\r\n    var result:Function = function(value:Object):*\r\n    {\r\n      resultHandler(value.data, value.hasMoreRecords);\r\n    }\r\n    \r\n    Promise.delay({data : [{label : \"X\"}, {label : \"Y\"}, {label : \"Z\"}], hasMoreRecords : true}, 1000).then(result).otherwise(errorHandler);\r\n  }\r\n}\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}